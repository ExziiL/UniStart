// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGODB_ADMIN")
}

model user {
  id            String    @id @default(auto()) @map("_id") @db.ObjectId
  name          String?   @unique
  email         String?   @unique
  emailVerified DateTime?
  image         String?
  password      String?

  role            Role             @default(USER)
  profile         Profile?
  universityInfo  UniversityInfo?
  siteSettings    SiteSettings?
  privacySettings PrivacySettings?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  accounts account[]
}

model account {
  id                String  @id @default(auto()) @map("_id") @db.ObjectId
  userId            String  @db.ObjectId
  type              String
  provider          String
  providerAccountId String
  refresh_token     String? @db.String
  access_token      String? @db.String
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.String
  session_state     String?
  user              user    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model conversation {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  
  
}

//#region types and enums

type Profile {
  bio      String?
  isOnline Boolean? @default(false)
}

type UserInfo {
  age         Int?
  gender      Gender?
  contactInfo ContactInfo
}

type ContactInfo {
  phone  String?
  email  String?
  adress Address?
}

type Address {
  country    String?
  city       String?
  street     String?
  streetNr   Int?
  postalCode Int?
}

type UniversityInfo {
  semester   Int?
  course     Course?
  focus      Focus?
  enrollment DateTime?
}

type SiteSettings {
  darkModeEnabled Boolean?
  language        Language @default(GERMAN)
}

type PrivacySettings {
  hideOnlineStatus   Boolean?
  verificationStatus Verification?
}

enum Role {
  USER
  ADMIN
}

enum Gender {
  MALE
  FEMALE
  DIVERSE
}

enum Course {
  COMPUTER_SIENCE
}

enum Focus {
  SOFTWARE_ENGINEERING
  IT_SECURITY
  MEDIA_COMPUTER_SIENCE
  GENERAL_COMPUTER_SIENCE
}

enum Language {
  ENGLISH
  GERMAN
}

enum Verification {
  NOT_VERIFIED
  PENDING
  VERIFIED
}

//#endregion
